> 计算机所有东西都会被转换成二进制，字符也不例外。因此就出现了各种各样的方式来表示字符。

#### ASCII码

用8位数字来表示字符，这被称为 ASCII 码。ASCII 码一共定义了 128 个字符，这 128 个字符只使用了 8 位二进制数中的后面 7 位，最前面的一位统一规定为 0。

#### 历史问题

英语用 128 个字符来编码完全是足够的，但是用来表示其他语言，128 个字符是远远不够的。于是，一些欧洲的国家就决定，将 ASCII 码中闲置的最高位利用起来，这样一来就能表示 256 个字符。但是，这里又有了一个问题，那就是不同的国家的字符集可能不同，就算它们都能用 256 个字符表示全，但是同一个码点（也就是 8 位二进制数）表示的字符可能可能不同。例如，144 在阿拉伯人的 ASCII 码中是 **گ**，而在俄罗斯的 ASCII 码中是 **ђ**。

因此，ASCII 码的问题在于尽管所有人都在 0 - 127 号字符上达成了一致，但对于 128 - 255 号字符上却有很多种不同的解释。与此同时，亚洲语言有更多的字符需要被存储，一个字节已经不够用了。于是，人们开始使用两个字节来存储字符。

各种各样的编码方式成了系统开发者的噩梦，因为他们想把软件卖到国外。于是，他们提出了一个“内码表”的概念，可以切换到相应语言的一个内码表，这样才能显示相应语言的字母。在这种情况下，如果使用多语种，那么就需要频繁的在内码表内进行切换。

#### Unicode 字符

Unicode 是一种字符编码，Unicode 记录着世界上所有字符对应的一个数字这个数字叫码点，十六进制表示，其范围为 `U+0000`~`U+10FFFF` , 可以表示超过100万个符号。

这么多的字符不是一次性定义的，而是分区定义。每个区可以存放65536个（216）字符，称为一个平面（plane）。目前，一共有17个（25）平面，也就是说，整个Unicode字符集的大小现在是221。

最前面的65536个字符位，称为基本平面（缩写BMP），它的码点范围是从0一直到216-1，写成16进制就是从U+0000到U+FFFF。1个基本平面

剩下的字符都放在辅助平面（缩写SMP），码点范围从U+010000一直到U+10FFFF。16个辅助平面



首先我们知道，每个字符对应一个码点，对应一个二进制数，不同的字符二进制位数不同， 所占用的字节数也不同，那我们如何知道一串二进制是表示一个字符，还是二个呢？这个规则Unicode 并没有规定，这个规定就叫做Unicode 的编码方式，目前有UTF-32，UTF-8，UTF-16

#### UTF-32

在这个规则下，每个字符都用4个字节来表示，那么我们就能解决上面的问题了，但是这样不管大小都用四个字节，就会造成字节的浪费，文件大小也会很大

假如规定每个字符都用4个字节来表示，那么久会很浪费字节，文件大小也会很大。这个缺点很致命，导致实际上没有人使用这种编码方法，HTML 5标准就明文规定，网页不得编码成UTF-32。



UTF 是 Unicode 的编码方式，规定了码点在计算机中的表示方法，常见的有 UTF16 和 UTF8。

UTF-32：转换规则简单直观，查找效率高。缺点在于浪费空间，同样内容的英语文本，它会比ASCII编码大四倍。这个缺点很致命，导致实际上没有人使用这种编码方法，HTML 5标准就明文规定，网页不得编码成UTF-32。



#### UTF-8

UTF-8 是一个非常惊艳的编码方式，漂亮的实现了对 ASCII 码的向后兼容，以保证 Unicode 可以被大众接受。是目前互联网上使用最广泛的一种 Unicode 编码方式，它的最大特点就是可变长。它可以使用 1 - 4 个字节表示一个字符，根据字符的不同变换长度。

编码规则如下：

1. 对于单个字节的字符，第一位设为 0，后面的 7 位对应这个字符的 Unicode 码点。因此，对于英文中的 0 - 127 号字符，与 ASCII 码完全相同。这意味着 ASCII 码那个年代的文档用 UTF-8 编码打开完全没有问题。

2. 对于需要使用 N 个字节来表示的字符（N > 1），第一个字节的前 N 位都设为 1，第 N + 1 位设为0，剩余的 N - 1 个字节的前两位都设位 10，剩下的二进制位则使用这个字符的 Unicode 码点来填充。

   

#### UTF-16

介于UTF-32与UTF-8之间，同时结合了定长和变长两种编码方法的特点。

它的编码规则很简单：基本平面的字符占用2个字节，辅助平面的字符占用4个字节。**也就是说，UTF-16的编码长度要么是2个字节（U+0000到U+FFFF），要么是4个字节（U+010000到U+10FFFF）。**

在基本平面内，从U+D800到U+DFFF是一个空段，即这些码点不对应任何字符。因此，这个空段可以用来映射辅助平面的字符。

辅助平面的字符，需要20位来表示，UTF-16把这20位分成2半，前 10 位映射在 U+D800 到 U+DBFF，称为高位（H），后 10 位映射在 U+DC00 到 U+DFFF，称为低位（L）。这意味着，一个辅助平面的字符，被拆成两个基本平面的字符表示。

因此，当我们遇到两个字节，发现它的码点在 U+D800 到 U+DBFF 之间，就可以断定，紧跟在后面的两个字节的码点，应该在 U+DC00 到 U+DFFF 之间，这四个字节必须放在一起解读。



接下来，以汉字"𠮷"为例，说明 UTF-16 编码方式是如何工作的。

汉字"𠮷"的 Unicode 码点为 `0x20BB7`，该码点显然超出了基本平面的范围（0x0000 - 0xFFFF），因此需要使用四个字节表示。首先用 `0x20BB7 - 0x10000` 计算出超出的部分，然后将其用 20 个二进制位表示（不足前面补 0 ），结果为`0001000010 1110110111`。接着，将前 10 位映射到 U+D800 到 U+DBFF 之间，后 10 位映射到 U+DC00 到 U+DFFF 即可。`U+D800` 对应的二进制数为 `1101100000000000`，直接填充后面的 10 个二进制位即可，得到 `1101100001000010`，转成 16 进制数则为 `0xD842`。同理可得，低位为 `0xDFB7`。因此得出汉字"𠮷"的 UTF-16 编码为 `0xD842 0xDFB7`。



#### JavaScript编码

看字符串是否有大长度

JavaScript语言采用Unicode字符集，但是只支持一种编码方法。

这种编码既不是UTF-16，也不是UTF-8，更不是UTF-32。上面那些编码方法，JavaScript都不用。

**JavaScript用的是UCS-2！**

JavaScript的下一个版本ECMAScript 6（简称ES6），大幅增强了Unicode支持，基本上解决了这个问题。

JavaScript采用Unicode 字符集，只支持UTF-16编码